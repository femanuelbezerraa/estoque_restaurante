<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro de Produto</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='cadastro_produto.css') }}">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>Olá, {{ usuario }}</h1>
            <nav class="nav-links">
                <a href="{{ url_for('estoque.historico_estoque') }}" class="btn-link">Movimentação de Estoque</a>
                <a href="{{ url_for('principal.index') }}" class="btn-link sair">Tela principal</a>
            </nav>
        </header>

        {% if error %}
            <p class="mensagem-erro" style="text-align:center; margin-bottom:12px;">{{ error }}</p>
        {% endif %}

        <main class="main-container">
            <!-- Formulário de Cadastro -->
            <section class="cadastro-container">
                <h2>Cadastrar Produto</h2>
                <form action="{{ url_for('produto.cadastro_produto') }}" method="POST" class="form-produto">
                    <div class="input-group">
                        <label for="nome">Nome do Produto:</label>
                        <input type="text" id="nome" name="nome" required>
                    </div>

                    <div class="input-group">
                        <label for="quantidade">Quantidade:</label>
                        <input type="number" id="quantidade" name="quantidade" required>
                    </div>

                    <div class="input-group">
                        <label for="quantidade_min">Quantidade Mínima:</label>
                        <input type="number" id="quantidade_min" name="quantidade_min" required>
                    </div>

                    <div class="input-group">
                        <label for="tipo">Tipo:</label>
                        <select id="tipo" name="tipo">
                                <option value="mililitro">ML</option>
                                <option value="grama">G</option>
                                <option value="kilograma">Kg</option>
                                <option value="un">Unidade</option>
                        </select>
                    </div>

                    <div class="form-buttons">
                        <button type="submit" class="btn cadastrar">Cadastrar</button>
                        <a href="{{ url_for('principal.index') }}" class="btn voltar">Voltar</a>
                    </div>
                </form>
            </section>

            <section class="lista-container">
                <h3>Lista de Produtos</h3>
                <div class="tabela-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>Nome</th>
                                <th>Quantidade</th>
                                <th>Qtd Mínima</th>
                                    <th>Unidade</th>
                                <th colspan="2">Ações</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for produto in produtos %}
                            <tr class="{% if produto.quantidade < produto.quantidade_minima %}baixo-estoque{% endif %}">
                                <td>{{ produto.nome }}</td>
                                <td>{{ produto.quantidade }}</td>
                                <td>{{ produto.quantidade_minima }}</td>
                                    <td>{{ produto.unidade }}</td>
                                <td class="acoes">
                                    <a href="{{ url_for('produto.editar_produto', produto_id=produto.id_produto) }}" class="btn editar">Editar</a>
                                    <form action="{{ url_for('produto.remover_produto', produto_id=produto.id_produto) }}" method="POST" style="display:inline">
                                        <button type="submit" class="btn excluir">Remover</button>
                                    </form>
                                </td>
                                <td class="acoes movimentar">
                                    <form action="{{ url_for('produto.adicionar_quantidade', produto_id=produto.id_produto) }}" method="POST" style="display:inline">
                                        <input type="number" name="quantidade" min="1" value="1" class="qtd-input">
                                        <button type="submit" class="btn adicionar">➕</button>
                                    </form>
                                    <form action="{{ url_for('produto.retirar_quantidade', produto_id=produto.id_produto) }}" method="POST" style="display:inline">
                                        <input type="number" name="quantidade" min="1" value="1" class="qtd-input">
                                        <button type="submit" class="btn retirar">➖</button>
                                    </form>
                                </td>
                            </tr>
                            {% else %}
                            <tr>
                                <td colspan="6">Nenhum produto cadastrado.</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </section>
        </main>
    </div>
</body>
</html>
